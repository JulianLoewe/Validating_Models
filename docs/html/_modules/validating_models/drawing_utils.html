
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>validating_models.drawing_utils &#8212; Validating Models  documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="../../index.html">
<p class="title">Validating Models</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../modules.html">
  validating_models
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <h1>Source code for validating_models.drawing_utils</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Tuple</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">numpy.matlib</span> <span class="kn">import</span> <span class="n">repmat</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib.patches</span> <span class="k">as</span> <span class="nn">patches</span>
<span class="kn">from</span> <span class="nn">dtreeviz.utils</span> <span class="kn">import</span> <span class="n">myround</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">transforms</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sn</span>

<span class="kn">from</span> <span class="nn">.colors</span> <span class="kn">import</span> <span class="n">adjust_colors</span>
<span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>

<span class="kn">from</span> <span class="nn">validating_models.stats</span> <span class="kn">import</span> <span class="n">get_decorator</span>

<span class="n">time_io</span> <span class="o">=</span> <span class="n">get_decorator</span><span class="p">(</span><span class="s1">&#39;io&#39;</span><span class="p">)</span>
<span class="n">time_io_histogram</span> <span class="o">=</span> <span class="n">get_decorator</span><span class="p">(</span><span class="s1">&#39;io histogram&#39;</span><span class="p">)</span>
<span class="n">time_io_piechart</span> <span class="o">=</span> <span class="n">get_decorator</span><span class="p">(</span><span class="s1">&#39;io piechart&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="Visualization"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Visualization">[docs]</a><span class="k">class</span> <span class="nc">Visualization</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Abstract Class for representing a Visualization. </span>

<span class="sd">    This class is used to have a uniform design e.g. font and colors. </span>
<span class="sd">    It&#39;s further used to store so called proxy artists, which are not drawn directly, but will be visible in legends.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">        fig : matplotlib.figure.Figure</span>
<span class="sd">            The base figure of the visualization.</span>
<span class="sd">        ax : matplotlib.axes.Axes</span>
<span class="sd">            The base axes of the visualization, containing the main drawings.</span>
<span class="sd">        proxy_artists : list of (matplotlib.artist.Artist, str)</span>
<span class="sd">            Components not recognized by matplotlib, which however should be drawn into the legend.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">        figure_size : (int,int)</span>
<span class="sd">            The size of the figure.</span>
<span class="sd">        ax : matplotlib.axes.Axes, optional</span>
<span class="sd">            Figure and Axes onto which the visualization should be drawn.</span>
<span class="sd">        proxy_artists : list of (matplotlib.artist.Artist, str), optional</span>
<span class="sd">            Already known components not recognized by matplotlib, which however should be drawn into the legend.</span>
<span class="sd">        fontname : str, optional</span>
<span class="sd">            The name of the font to be used.</span>
<span class="sd">        fontsize : int, optional</span>
<span class="sd">            The size of the font to be used.</span>
<span class="sd">        graph_colors : dict, optional</span>
<span class="sd">            A dictionary of color options to be set (See dtreeviz documentation). </span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">figure_size</span><span class="p">,</span>
                 <span class="n">ax</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">proxy_artists</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">fontname</span><span class="o">=</span><span class="s1">&#39;DejaVu Sans&#39;</span><span class="p">,</span>
                 <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span>
                 <span class="n">graph_colors</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fontname</span> <span class="o">=</span> <span class="n">fontname</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fontsize</span> <span class="o">=</span> <span class="n">fontsize</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_graph_colors</span> <span class="o">=</span> <span class="n">adjust_colors</span><span class="p">(</span><span class="n">graph_colors</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="n">figure_size</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ax</span> <span class="o">=</span> <span class="n">ax</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fig</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_width</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="c1"># list of (handle, label) of additional Components to include in the legend when generated</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxy_artists</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="n">proxy_artists</span> <span class="o">==</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">proxy_artists</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;top&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;right&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_linewidth</span><span class="p">(</span><span class="mf">.3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;bottom&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_linewidth</span><span class="p">(</span><span class="mf">.3</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

<div class="viewcode-block" id="Visualization.title"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Visualization.title">[docs]</a>    <span class="k">def</span> <span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Sets the title of the visualization.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">            title : str</span>
<span class="sd">                The title of the visualization.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            validating_models.drawing_utils.Visualization</span>
<span class="sd">                The visualization object.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_fontsize</span> <span class="o">+</span> <span class="mi">5</span><span class="p">,</span>
                          <span class="n">fontname</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_fontname</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_graph_colors</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">])</span>
        <span class="c1">#        self.ax.text(1.0,1.0, title, transform=transforms.IdentityTransform(), fontsize=30,</span>
        <span class="c1">#                  fontname=self._fontname, color=self._graph_colors[&#39;title&#39;], ha=&#39;center&#39;, va=&#39;top&#39;) TODO: Fix for PieChart</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Visualization.set_xlabel"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Visualization.set_xlabel">[docs]</a>    <span class="k">def</span> <span class="nf">set_xlabel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Sets the label of the x-Axis of the visualization.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">            label : str</span>
<span class="sd">                The label to be used for the x axis.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            validating_models.drawing_utils.Visualization</span>
<span class="sd">                The visualization object.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_fontsize</span><span class="p">,</span>
                           <span class="n">fontname</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_fontname</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_graph_colors</span><span class="p">[</span><span class="s1">&#39;axis_label&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Visualization.set_ylabel"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Visualization.set_ylabel">[docs]</a>    <span class="k">def</span> <span class="nf">set_ylabel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Sets the label of the y-Axis of the visualization.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">            label : str</span>
<span class="sd">                The label to be used for the y-Axis.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            validating_models.drawing_utils.Visualization</span>
<span class="sd">                The visualization object.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_fontsize</span><span class="p">,</span>
                           <span class="n">fontname</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_fontname</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_graph_colors</span><span class="p">[</span><span class="s1">&#39;axis_label&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Visualization.set_tick_params"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Visualization.set_tick_params">[docs]</a>    <span class="k">def</span> <span class="nf">set_tick_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;major&#39;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Sets the tick parameters using ax.tick_params.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">            axis : {&#39;x&#39;,&#39;y&#39;,&#39;both&#39;}</span>
<span class="sd">                The axis to which the tick parameters of the visualization are set.</span>
<span class="sd">            which : {&#39;major&#39;,&#39;minor&#39;,&#39;both&#39;}</span>
<span class="sd">                The group of ticks to which the tick parameters of the visualization are set.</span>
<span class="sd">            length : int</span>
<span class="sd">                The length of the ticks in points</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            validating_models.drawing_utils.Visualization</span>
<span class="sd">                The visualization object.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">length</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="n">which</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="n">length</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">.3</span><span class="p">,</span>
                                <span class="n">labelcolor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_graph_colors</span><span class="p">[</span><span class="s1">&#39;tick_label&#39;</span><span class="p">],</span> <span class="n">labelsize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_fontsize</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="n">which</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">.3</span><span class="p">,</span>
                                <span class="n">labelcolor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_graph_colors</span><span class="p">[</span><span class="s1">&#39;tick_label&#39;</span><span class="p">],</span> <span class="n">labelsize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_fontsize</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Visualization.set_label_orientation"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Visualization.set_label_orientation">[docs]</a>    <span class="k">def</span> <span class="nf">set_label_orientation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">orientation</span><span class="p">,</span> <span class="n">major</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Sets the orientation of the tick labels on the x-Axis.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">            orientation : {horizontal, vertical}</span>
<span class="sd">                The orientation of the labels to be set.</span>
<span class="sd">            major : bool</span>
<span class="sd">                The group of ticks to which the orientation should be set</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            validating_models.drawing_utils.Visualization</span>
<span class="sd">                The visualization object.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xticklabels</span><span class="p">(</span><span class="n">minor</span><span class="o">=</span><span class="ow">not</span> <span class="n">major</span><span class="p">):</span>
            <span class="n">t</span><span class="o">.</span><span class="n">set_rotation</span><span class="p">(</span><span class="n">orientation</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Visualization.draw_legend"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Visualization.draw_legend">[docs]</a>    <span class="k">def</span> <span class="nf">draw_legend</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Draws the legend next to the visualization.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            validating_models.drawing_utils.Visualization</span>
<span class="sd">                The visualization object.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">hl</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">get_legend_handles_labels</span><span class="p">()))</span>
        <span class="n">hl</span> <span class="o">=</span> <span class="n">hl</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">proxy_artists</span>
        <span class="n">h</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">hl</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="o">*</span><span class="n">h</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.04</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper left&quot;</span><span class="p">,</span>
                       <span class="n">fontsize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_fontsize</span><span class="p">,</span> <span class="n">title_fontsize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_fontsize</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Categories&#39;</span><span class="p">,</span> <span class="n">bbox_transform</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">transFigure</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Visualization.save"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Visualization.save">[docs]</a>    <span class="nd">@time_io</span>
    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">transparent</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Saves the visualization to a file with path filename.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">            filename : str</span>
<span class="sd">                The path of the file, to which the visualization should be saved.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            validating_models.drawing_utils.Visualization</span>
<span class="sd">                The visualization object.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">number</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">,</span>
                    <span class="n">pad_inches</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">transparent</span><span class="o">=</span><span class="n">transparent</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="n">dpi</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Visualization.draw_wedge"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Visualization.draw_wedge">[docs]</a>    <span class="k">def</span> <span class="nf">draw_wedge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">x_range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Modifies the ticks on the x-Axis such that the ticks of the given group are longer, drawn in red and a new tick at position x is added.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">            x : double</span>
<span class="sd">                The position at which a new tick should be drawn.</span>
<span class="sd">            x_range : (double, double)</span>
<span class="sd">                The range of the x axis, which is assumed by the given x.</span>
<span class="sd">            minor : bool</span>
<span class="sd">                The group of ticks to which the new tick is added and which are now longer and red.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            validating_models.drawing_utils.Visualization</span>
<span class="sd">                The visualization object.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">x_range</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">x_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x_range</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x_pos</span> <span class="o">=</span> <span class="n">x</span>

        <span class="c1"># Add Text as Tick</span>
        <span class="n">x_ticks</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xticks</span><span class="p">(</span><span class="n">minor</span><span class="o">=</span><span class="n">minor</span><span class="p">))</span>
        <span class="n">x_tick_labels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xticklabels</span><span class="p">(</span><span class="n">minor</span><span class="o">=</span><span class="n">minor</span><span class="p">))</span>

        <span class="n">x_ticks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x_pos</span><span class="p">)</span>
        <span class="n">x_tick_labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">myround</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">2</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">x_ticks</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="n">minor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">x_tick_labels</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="n">minor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span>
            <span class="n">which</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;minor&#39;</span> <span class="k">if</span> <span class="n">minor</span> <span class="k">else</span> <span class="s1">&#39;major&#39;</span><span class="p">),</span> <span class="n">length</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Visualization.transform"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Visualization.transform">[docs]</a>    <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="nb">range</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Transforms x given the range onto the range of the x-axis of the visualization.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">            x : double</span>
<span class="sd">                The value to be transformed.</span>
<span class="sd">            range : (double, double)</span>
<span class="sd">                The range of x, which is assumed.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            double</span>
<span class="sd">                The result</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">old_range</span> <span class="o">=</span> <span class="nb">range</span>  <span class="c1"># x coordinates</span>
        <span class="n">new_range</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()</span>  <span class="c1"># data coordinates</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">old_range</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="p">(</span><span class="n">new_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">new_range</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="p">(</span><span class="n">old_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">old_range</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="n">new_range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></div>

<div class="viewcode-block" id="Visualization.draw"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Visualization.draw">[docs]</a>    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Draws the visualization.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">            args</span>
<span class="sd">                The additional parameters needed to draw the visualization</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            validating_models.drawing_utils.Visualization</span>
<span class="sd">                The visualization object.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Visualization.get_height"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Visualization.get_height">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_height</span><span class="p">(</span><span class="n">indices</span><span class="p">,</span> <span class="n">max_samples_overall</span><span class="p">,</span> <span class="n">min_samples_overall</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>  <span class="c1"># Groups of indices</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Visualization.get_width"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Visualization.get_width">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_width</span><span class="p">(</span><span class="n">number_of_groups</span><span class="p">,</span> <span class="n">num_bars_per_group</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="k">pass</span></div></div>


<div class="viewcode-block" id="GroupedStackedHistogram"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.GroupedStackedHistogram">[docs]</a><span class="k">class</span> <span class="nc">GroupedStackedHistogram</span><span class="p">(</span><span class="n">Visualization</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;A visualization consisting of groups of stacked bars. Each group has the same number of bars. A stacked bar consists of data of different categories.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">        data: list of numpy.ndarray with shape (#groups, #bars_per_group)</span>
<span class="sd">            The data to be visualized</span>
<span class="sd">        figure_size : (int,int), optional</span>
<span class="sd">            The size of the figure.</span>
<span class="sd">        ax : matplotlib.axes.Axes), optional</span>
<span class="sd">            Figure and Axes onto which the visualization should be drawn.</span>
<span class="sd">        proxy_artists : list of (matplotlib.artist.Artist, str), optional</span>
<span class="sd">            Already known components not recognized by matplotlib, which however should be drawn into the legend.</span>
<span class="sd">        fontname : str, optional</span>
<span class="sd">            The name of the font to be used.</span>
<span class="sd">        fontsize : int, optional</span>
<span class="sd">            The size of the font to be used.</span>
<span class="sd">        graph_colors : dict, optional</span>
<span class="sd">            A dictionary of color options to be set (See dtreeviz documentation). </span>

<span class="sd">    Example</span>
<span class="sd">    -------</span>
<span class="sd">    .. plot::</span>

<span class="sd">        &gt;&gt;&gt; import numpy as np</span>
<span class="sd">        &gt;&gt;&gt; import matplotlib.pyplot as plt</span>
<span class="sd">        &gt;&gt;&gt; from validating_models.drawing_utils import GroupedStackedHistogram</span>
<span class="sd">        &gt;&gt;&gt; categorical_labels = [&#39;A&#39;,&#39;B&#39;,&#39;C&#39;,&#39;D&#39;]</span>
<span class="sd">        &gt;&gt;&gt; categorical_colors = [&#39;r&#39;,&#39;b&#39;,&#39;g&#39;,&#39;c&#39;]</span>
<span class="sd">        &gt;&gt;&gt; num_groups = 3</span>
<span class="sd">        &gt;&gt;&gt; num_bars_per_group = 2</span>
<span class="sd">        &gt;&gt;&gt; data = np.random.rand(len(categorical_labels), num_groups, num_bars_per_group)</span>
<span class="sd">        &gt;&gt;&gt; figure_size = (GroupedStackedHistogram.get_width(num_groups, num_bars_per_group), 3)</span>
<span class="sd">        &gt;&gt;&gt; plot = GroupedStackedHistogram([data[0,:,:],data[1,:,:],data[2,:,:],data[3,:,:]],figure_size)</span>
<span class="sd">        &gt;&gt;&gt; bar_labels = [f&#39;bar_{i}&#39; for i in np.arange(num_bars_per_group)]</span>
<span class="sd">        &gt;&gt;&gt; group_labels = [f&#39;group_{j}&#39; for j in np.arange(num_groups)]</span>
<span class="sd">        &gt;&gt;&gt; plot.draw(bar_labels, &#39;Bar Label&#39;, group_labels=group_labels, categorical_labels=categorical_labels, categorical_colors=categorical_colors)</span>
<span class="sd">        &gt;&gt;&gt; plot.draw_legend()</span>

<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="c1"># List of categories. Per category a array of shape (#groups, #bars_per_group) e.g. [not_applicable_array, invalid_array, valid_array]</span>
                 <span class="n">data</span><span class="p">,</span>
                 <span class="n">figure_size</span><span class="p">,</span>
                 <span class="n">ax</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">proxy_artists</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">fontname</span><span class="o">=</span><span class="s1">&#39;DejaVu Sans&#39;</span><span class="p">,</span>
                 <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span>
                 <span class="n">graph_colors</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="n">data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_num_groups</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_num_bars_per_group</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">figure_size</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">proxy_artists</span><span class="p">,</span> <span class="n">fontname</span><span class="p">,</span> <span class="n">fontsize</span><span class="p">,</span> <span class="n">graph_colors</span><span class="p">)</span>

<div class="viewcode-block" id="GroupedStackedHistogram.get_width"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.GroupedStackedHistogram.get_width">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_width</span><span class="p">(</span><span class="n">number_of_groups</span><span class="p">,</span> <span class="n">num_bars_per_group</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Approximates the needed size for the figure given the number of groups and bars per group</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">((</span><span class="n">number_of_groups</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span>
                  <span class="n">number_of_groups</span> <span class="o">*</span> <span class="n">num_bars_per_group</span><span class="p">)</span><span class="o">/</span><span class="mi">4</span>
        <span class="k">return</span> <span class="n">result</span></div>

<div class="viewcode-block" id="GroupedStackedHistogram.get_height"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.GroupedStackedHistogram.get_height">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_height</span><span class="p">(</span><span class="n">indices</span><span class="p">,</span> <span class="n">max_samples_overall</span><span class="p">,</span> <span class="n">min_samples_overall</span><span class="p">,</span> <span class="n">logscaling_base</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Function to calculate the height of a histogram. </span>

<span class="sd">        Given that there are different groups with different amount of samples, and in a histogram a selected group of groups are visualized.</span>
<span class="sd">        This methode calculates the height of the histogram with the selected groups, such that the height of the histogram is scaled relativ to the maximum number of samples in all groups.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">            selected_groups : list of str</span>
<span class="sd">                The selected groups visualized in the histogram, whose height is to be determined. Has to be a list of keys of all_groups.</span>
<span class="sd">            all_groups : dict of (str -&gt; list of indices) </span>
<span class="sd">                A dictionary containing the indices of the samples per group.</span>
<span class="sd">            logscaling_base : float, optional</span>
<span class="sd">                When given the height is scaled logithmically with the given base.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c1"># Adding + 1 to every value to avoid the zero.</span>
        <span class="n">samples_nodes</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">max_samples_overall</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">min_samples_overall</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="n">logscaling_base</span><span class="p">:</span>
            <span class="n">max_samples_overall</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
                <span class="n">max_samples_overall</span><span class="p">)</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">logscaling_base</span><span class="p">)</span>
            <span class="n">samples_nodes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">samples_nodes</span><span class="p">)</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">logscaling_base</span><span class="p">)</span>
            <span class="n">min_samples_overall</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
                <span class="n">min_samples_overall</span><span class="p">)</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">logscaling_base</span><span class="p">)</span>



        <span class="n">height_range</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">max_samples_overall</span> <span class="o">-</span> <span class="n">min_samples_overall</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">h</span> <span class="o">=</span> <span class="n">height_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">h</span> <span class="o">=</span> <span class="p">(</span><span class="n">samples_nodes</span> <span class="o">-</span> <span class="n">min_samples_overall</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">height_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">height_range</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="p">(</span>
                <span class="n">max_samples_overall</span> <span class="o">-</span> <span class="n">min_samples_overall</span><span class="p">)</span> <span class="o">+</span> <span class="n">height_range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">h</span></div>
    
<div class="viewcode-block" id="GroupedStackedHistogram.save"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.GroupedStackedHistogram.save">[docs]</a>    <span class="nd">@time_io_histogram</span>
    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">transparent</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">transparent</span><span class="p">,</span> <span class="n">dpi</span><span class="p">)</span></div>

<div class="viewcode-block" id="GroupedStackedHistogram.draw"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.GroupedStackedHistogram.draw">[docs]</a>    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
             <span class="c1"># major -&gt; len(bar_labels) = #bars_per_group</span>
             <span class="n">bar_labels</span><span class="p">,</span>
             <span class="n">bar_labels_title</span><span class="p">,</span>
             <span class="n">bar_labels_orientation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">,</span>
             <span class="c1"># minor -&gt; len(group_labels) = #groups</span>
             <span class="n">group_labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
             <span class="n">group_labels_title</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
             <span class="n">group_labels_orientation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">,</span>
             <span class="n">categorical_labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
             <span class="n">categorical_colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
             <span class="n">space_between_groups</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Draws the GroupedStackedHistogram.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">            bar_labels : list of str</span>
<span class="sd">                The labels of the bars in each group.</span>
<span class="sd">            bar_labels_title : str</span>
<span class="sd">                A title for the bars.</span>
<span class="sd">            bar_labels_orientation : {&#39;horizontal&#39;,&#39;vertical&#39;}, optional</span>
<span class="sd">                The orientation of of the bar labels.</span>
<span class="sd">            group_labels : list of str, optional</span>
<span class="sd">                The labels of the groups</span>
<span class="sd">            group_labels_title : title, optional</span>
<span class="sd">                The title for the groups</span>
<span class="sd">            group_labels_orientation : {&#39;horizontal&#39;,&#39;vertical&#39;}, optional</span>
<span class="sd">                The orientation of the group labels.</span>
<span class="sd">            categorical_labels : list of str</span>
<span class="sd">                The labels for the different categories.</span>
<span class="sd">            categorical_colors : list of colors</span>
<span class="sd">                The colors of the different categories</span>
<span class="sd">            space_between_groups: bool, optional</span>
<span class="sd">                Whether there should be space between the groups of bars.</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="n">num_bars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_groups</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_bars_per_group</span>

        <span class="c1"># Preprocess data</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,))</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">space_between_groups</span><span class="p">:</span>
            <span class="n">bar_locations</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="n">num_bars</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">leaf_locations</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span>
                <span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_bars_per_group</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_groups</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_bars_per_group</span><span class="p">)</span> <span class="o">+</span> <span class="mf">0.01</span>  <span class="c1"># bar_locations cannot be equal to leaf_locations therefore 0.01 is added</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">bar_locations</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">setdiff1d</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_groups</span> <span class="o">+</span> <span class="n">num_bars</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span>
                <span class="n">start</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_bars_per_group</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_groups</span> <span class="o">+</span> <span class="n">num_bars</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_bars_per_group</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
            <span class="n">leaf_locations</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_bars_per_group</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_width</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
                                       <span class="n">stop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_groups</span> <span class="o">+</span> <span class="n">num_bars</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_num_bars_per_group</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_width</span><span class="p">)</span> <span class="o">+</span> <span class="mf">0.01</span>  <span class="c1"># bar_locations cannot be equal to leaf_locations therefore 0.01 is added</span>

        <span class="n">bottom</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">array</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">count_nonzero</span><span class="p">(</span><span class="n">array</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">bar_locations</span><span class="p">,</span> <span class="n">array</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_width</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="n">bottom</span><span class="p">,</span><span class="n">edgecolor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_graph_colors</span><span class="p">[</span><span class="s1">&#39;pie&#39;</span><span class="p">],</span>
                            <span class="n">color</span><span class="o">=</span><span class="n">categorical_colors</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">lw</span><span class="o">=</span><span class="mf">.3</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">categorical_labels</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="n">bottom</span> <span class="o">=</span> <span class="n">bottom</span> <span class="o">+</span> <span class="n">array</span>

        <span class="c1"># Bars (Major Labels)</span>
        <span class="n">max_height</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">max_width</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">bar_locations</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="n">xticklabels</span> <span class="o">=</span> <span class="p">[</span><span class="n">label</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">repmat</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
            <span class="n">bar_labels</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_groups</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,)))</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">bar_locations</span><span class="p">)]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">xticklabels</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xticklabels</span><span class="p">(</span><span class="n">minor</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
            <span class="n">t</span><span class="o">.</span><span class="n">set_rotation</span><span class="p">(</span><span class="n">bar_labels_orientation</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>

        <span class="c1"># self.ax.draw(self.fig.canvas.get_renderer())</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">bar_labels</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>

            <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xticklabels</span><span class="p">(</span><span class="n">minor</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
                <span class="n">bbox</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">(</span><span class="n">renderer</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">get_renderer</span><span class="p">())</span><span class="o">.</span><span class="n">transformed</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="o">.</span><span class="n">inverted</span><span class="p">())</span>  <span class="c1"># gets the bounding box of the bar labels in Axes coordinates</span>
                <span class="n">max_height</span> <span class="o">=</span> <span class="n">bbox</span><span class="o">.</span><span class="n">height</span> <span class="k">if</span> <span class="n">bbox</span><span class="o">.</span><span class="n">height</span> <span class="o">&gt;</span> <span class="n">max_height</span> <span class="k">else</span> <span class="n">max_height</span>
                <span class="n">max_width</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">max_height</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.1</span>

        <span class="c1"># Groups (Minor Labels)</span>
        <span class="k">if</span> <span class="n">group_labels</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">group_labels</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">leaf_locations</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">group_labels</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;minor&#39;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xticklabels</span><span class="p">(</span><span class="n">minor</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
                <span class="n">t</span><span class="o">.</span><span class="n">set_rotation</span><span class="p">(</span><span class="n">group_labels_orientation</span><span class="p">)</span>
                <span class="n">t</span><span class="o">.</span><span class="n">set_y</span><span class="p">(</span><span class="o">-</span><span class="n">max_height</span><span class="o">-</span><span class="mf">0.1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">group_labels_title</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">bar_labels_title</span> <span class="o">+</span> <span class="s1">&#39; per &#39;</span> <span class="o">+</span> <span class="n">group_labels_title</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">bar_labels_title</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="StackedHistogram"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.StackedHistogram">[docs]</a><span class="k">class</span> <span class="nc">StackedHistogram</span><span class="p">(</span><span class="n">GroupedStackedHistogram</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;A visualization consisting of stacked bars. A stacked bar consists of data of different categories.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">        data: numpy.ndarray with shape (#categories, #bars)</span>
<span class="sd">            The data to be visualized</span>
<span class="sd">        figure_size : (int,int), optional</span>
<span class="sd">            The size of the figure.</span>
<span class="sd">        ax : matplotlib.axes.Axes), optional</span>
<span class="sd">            Figure and Axes onto which the visualization should be drawn.</span>
<span class="sd">        proxy_artists : list of (matplotlib.artist.Artist, str), optional</span>
<span class="sd">            Already known components not recognized by matplotlib, which however should be drawn into the legend.</span>
<span class="sd">        fontname : str, optional</span>
<span class="sd">            The name of the font to be used.</span>
<span class="sd">        fontsize : int, optional</span>
<span class="sd">            The size of the font to be used.</span>
<span class="sd">        graph_colors : dict, optional</span>
<span class="sd">            A dictionary of color options to be set (See dtreeviz documentation). </span>

<span class="sd">    Example</span>
<span class="sd">    -------</span>
<span class="sd">    .. plot::</span>

<span class="sd">        &gt;&gt;&gt; import numpy as np</span>
<span class="sd">        &gt;&gt;&gt; import matplotlib.pyplot as plt</span>
<span class="sd">        &gt;&gt;&gt; from validating_models.drawing_utils import StackedHistogram</span>
<span class="sd">        &gt;&gt;&gt; categorical_labels = [&#39;A&#39;,&#39;B&#39;,&#39;C&#39;,&#39;D&#39;]</span>
<span class="sd">        &gt;&gt;&gt; categorical_colors = [&#39;r&#39;,&#39;b&#39;,&#39;g&#39;,&#39;c&#39;]</span>
<span class="sd">        &gt;&gt;&gt; num_bars = 10</span>
<span class="sd">        &gt;&gt;&gt; data = np.random.rand(len(categorical_labels), num_bars)</span>
<span class="sd">        &gt;&gt;&gt; plot = StackedHistogram(data,(StackedHistogram.get_width(1, num_bars),3))</span>
<span class="sd">        &gt;&gt;&gt; bar_labels = [f&#39;bar_{i}&#39; for i in np.arange(num_bars)]</span>
<span class="sd">        &gt;&gt;&gt; plot.draw(bar_labels, &#39;Bar Label&#39;, categorical_labels=categorical_labels, categorical_colors=categorical_colors)</span>
<span class="sd">        &gt;&gt;&gt; plot.draw_legend()</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span>  <span class="c1"># e.g. shape (#categories, #bars)</span>
                 <span class="n">figure_size</span><span class="p">,</span>
                 <span class="n">ax</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">proxy_artists</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">fontname</span><span class="o">=</span><span class="s1">&#39;DejaVu Sans&#39;</span><span class="p">,</span>
                 <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span>
                 <span class="n">graph_colors</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_mydata</span> <span class="o">=</span> <span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
                        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_mydata</span><span class="p">,</span> <span class="n">figure_size</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span>
                         <span class="n">proxy_artists</span><span class="p">,</span> <span class="n">fontname</span><span class="p">,</span> <span class="n">fontsize</span><span class="p">,</span> <span class="n">graph_colors</span><span class="p">)</span>

<div class="viewcode-block" id="StackedHistogram.get_width"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.StackedHistogram.get_width">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_width</span><span class="p">(</span><span class="n">number_of_groups</span><span class="p">,</span> <span class="n">num_bars_per_group</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Approximates the needed size for the figure given the number of groups and bars per group</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="n">number_of_groups</span> <span class="o">*</span> <span class="n">num_bars_per_group</span><span class="p">)</span><span class="o">/</span><span class="mi">4</span>
        <span class="k">return</span> <span class="n">result</span></div>

<div class="viewcode-block" id="StackedHistogram.draw"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.StackedHistogram.draw">[docs]</a>    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bar_labels</span><span class="p">,</span>
             <span class="n">bar_labels_title</span><span class="p">,</span>
             <span class="n">bar_labels_orientation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">,</span>
             <span class="n">categorical_labels</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
             <span class="n">categorical_colors</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Draws the StackedHistogramm.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">            bar_labels : list of str</span>
<span class="sd">                The labels of the bars in each group.</span>
<span class="sd">            bar_labels_title : str</span>
<span class="sd">                A title for the bars.</span>
<span class="sd">            bar_labels_orientation : {&#39;horizontal&#39;,&#39;vertical&#39;}, optional</span>
<span class="sd">                The orientation of of the bar labels.</span>
<span class="sd">            categorical_labels : list of str</span>
<span class="sd">                The labels for the different categories.</span>
<span class="sd">            categorical_colors : list of colors</span>
<span class="sd">                The colors of the different categories</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">bar_labels</span><span class="o">=</span><span class="n">bar_labels</span><span class="p">,</span>
                     <span class="n">bar_labels_title</span><span class="o">=</span><span class="n">bar_labels_title</span><span class="p">,</span> <span class="n">bar_labels_orientation</span><span class="o">=</span><span class="n">bar_labels_orientation</span><span class="p">,</span> <span class="n">categorical_labels</span><span class="o">=</span><span class="n">categorical_labels</span><span class="p">,</span> <span class="n">categorical_colors</span><span class="o">=</span><span class="n">categorical_colors</span><span class="p">,</span> <span class="n">space_between_groups</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="StackedHistogram.add_wedge"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.StackedHistogram.add_wedge">[docs]</a>    <span class="k">def</span> <span class="nf">add_wedge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">x_range</span><span class="p">,</span> <span class="n">categorical_labels</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Adds a highlighted tick at position x given the range of x. When categorical_labels is given the x-Axis is labeled accordingly.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">            x : double</span>
<span class="sd">                The position at which a new tick should be drawn.</span>
<span class="sd">            x_range : (double, double)</span>
<span class="sd">                The range of the x axis, which is assumed by the given x.</span>
<span class="sd">            categorical_labels : dict of (double -&gt; str) assignments</span>
<span class="sd">                If set the labels are shown as sets on the limits of the x-Axis. The left side of the x-Axis contains the labels, which have a smaller value then x and the right side the bigger ones.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            validating_models.drawing_utils.Visualization</span>
<span class="sd">                The visualization object.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">coordinates_range</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span>
                             <span class="bp">self</span><span class="o">.</span><span class="n">_num_bars_per_group</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_groups</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">coordinates_range</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">categorical_labels</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="n">categorical_labels</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">myround</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">x_range</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_mydata</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">coordinates_range</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_wedge</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x_range</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div></div>


<div class="viewcode-block" id="PieChart"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.PieChart">[docs]</a><span class="k">class</span> <span class="nc">PieChart</span><span class="p">(</span><span class="n">Visualization</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;A PieChart showing the fractions of the given counts. Only counts != 0 will be added to the legend.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">        counts : numpy.ndarray of shape (#counts,) with dtype int</span>
<span class="sd">            The data to be visualized.</span>
<span class="sd">        figure_size : (int,int)</span>
<span class="sd">            The size of the figure.</span>
<span class="sd">        ax : matplotlib.axes.Axes), optional</span>
<span class="sd">            Figure and Axes onto which the visualization should be drawn.</span>
<span class="sd">        proxy_artists : list of (matplotlib.artist.Artist, str), optional</span>
<span class="sd">            Already known components not recognized by matplotlib, which however should be drawn into the legend.</span>
<span class="sd">        fontname : str, optional</span>
<span class="sd">            The name of the font to be used.</span>
<span class="sd">        fontsize : int, optional</span>
<span class="sd">            The size of the font to be used.</span>
<span class="sd">        graph_colors : dict, optional</span>
<span class="sd">            A dictionary of color options to be set (See dtreeviz documentation). </span>

<span class="sd">    Example</span>
<span class="sd">    -------</span>
<span class="sd">    .. plot::</span>

<span class="sd">        &gt;&gt;&gt; import numpy as np</span>
<span class="sd">        &gt;&gt;&gt; import matplotlib.pyplot as plt</span>
<span class="sd">        &gt;&gt;&gt; from validating_models.drawing_utils import PieChart</span>
<span class="sd">        &gt;&gt;&gt; categorical_labels = [&#39;A&#39;,&#39;B&#39;,&#39;C&#39;,&#39;D&#39;]</span>
<span class="sd">        &gt;&gt;&gt; categorical_colors = [&#39;r&#39;,&#39;b&#39;,&#39;g&#39;,&#39;c&#39;]</span>
<span class="sd">        &gt;&gt;&gt; data = np.array([5,4,3,2])</span>
<span class="sd">        &gt;&gt;&gt; plot = PieChart(data, (3,3))</span>
<span class="sd">        &gt;&gt;&gt; plot.draw(colors=categorical_colors, text=&#39;Some text&#39;, labels=categorical_labels)</span>
<span class="sd">        &gt;&gt;&gt; plot.draw_legend()</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">counts</span><span class="p">,</span>  <span class="c1"># counts of shape (#counts,)</span>
                 <span class="n">figure_size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">ax</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">proxy_artists</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">fontname</span><span class="o">=</span><span class="s1">&#39;DejaVu Sans&#39;</span><span class="p">,</span>
                 <span class="n">fontsize</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span>
                 <span class="n">graph_colors</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_counts</span> <span class="o">=</span> <span class="n">counts</span>
        <span class="k">if</span> <span class="n">figure_size</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_size</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_counts</span><span class="p">))</span>
            <span class="n">figure_size</span> <span class="o">=</span> <span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">figure_size</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">proxy_artists</span><span class="o">=</span><span class="n">proxy_artists</span><span class="p">,</span> <span class="n">fontname</span><span class="o">=</span><span class="n">fontname</span><span class="p">,</span>
                         <span class="n">fontsize</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span> <span class="n">graph_colors</span><span class="o">=</span><span class="n">graph_colors</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_draw_mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_counts</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

<div class="viewcode-block" id="PieChart.get_height"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.PieChart.get_height">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_height</span><span class="p">(</span><span class="n">indices</span><span class="p">,</span> <span class="n">max_samples_overall</span><span class="p">,</span> <span class="n">min_samples_overall</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="n">nsamples</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">PieChart</span><span class="o">.</span><span class="n">get_size</span><span class="p">(</span><span class="n">nsamples</span><span class="p">)</span></div>

<div class="viewcode-block" id="PieChart.get_width"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.PieChart.get_width">[docs]</a>    <span class="k">def</span> <span class="nf">get_width</span><span class="p">(</span><span class="n">number_of_groups</span><span class="p">,</span> <span class="n">num_bars_per_group</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="k">pass</span></div>
    
<div class="viewcode-block" id="PieChart.save"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.PieChart.save">[docs]</a>    <span class="nd">@time_io_piechart</span>
    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">transparent</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">transparent</span><span class="p">,</span> <span class="n">dpi</span><span class="p">)</span></div>

<div class="viewcode-block" id="PieChart.get_size"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.PieChart.get_size">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_size</span><span class="p">(</span><span class="n">nsamples</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Calculates the size of a visualization given the number of samples.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">            nsamples : int</span>
<span class="sd">                The number of samples</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            double</span>
<span class="sd">                The recommended size.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">minsize</span> <span class="o">=</span> <span class="mf">.15</span>
        <span class="n">maxsize</span> <span class="o">=</span> <span class="mf">1.3</span>
        <span class="n">slope</span> <span class="o">=</span> <span class="mf">0.02</span>
        <span class="n">size</span> <span class="o">=</span> <span class="n">nsamples</span> <span class="o">*</span> <span class="n">slope</span> <span class="o">+</span> <span class="n">minsize</span>
        <span class="n">size</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">maxsize</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">size</span></div>

<div class="viewcode-block" id="PieChart.draw"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.PieChart.draw">[docs]</a>    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Draws the PieChart.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">            colors : list of str</span>
<span class="sd">                The color for each count</span>
<span class="sd">            text : str</span>
<span class="sd">                The text shown below the PieChart</span>
<span class="sd">            labels : list of str</span>
<span class="sd">                A label for each count to be used in legends.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">colors</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">colors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_graph_colors</span><span class="p">[</span><span class="s1">&#39;classes&#39;</span><span class="p">][</span><span class="mi">10</span><span class="p">]</span>
        <span class="n">counts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_counts</span><span class="p">)</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span>
        <span class="n">size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">get_figheight</span><span class="p">()</span>
        <span class="n">tweak</span> <span class="o">=</span> <span class="n">size</span> <span class="o">*</span> <span class="mf">.01</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">get_figwidth</span><span class="p">()</span> <span class="o">-</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">tweak</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">get_figheight</span><span class="p">()</span> <span class="o">-</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">tweak</span><span class="p">)</span>
        <span class="c1"># frame=True needed for some reason to fit pie properly (ugh)</span>
        <span class="c1"># had to tweak the crap out of this to get tight box around piechart :(</span>
        <span class="n">wedges</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">pie</span><span class="p">(</span><span class="n">counts</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_draw_mask</span><span class="p">],</span> <span class="n">center</span><span class="o">=</span><span class="p">(</span><span class="n">size</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">6</span> <span class="o">*</span> <span class="n">tweak</span><span class="p">,</span> <span class="n">size</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">6</span> <span class="o">*</span> <span class="n">tweak</span><span class="p">),</span> <span class="n">radius</span><span class="o">=</span><span class="n">size</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">colors</span><span class="p">)[</span><span class="bp">self</span><span class="o">.</span><span class="n">_draw_mask</span><span class="p">],</span>
                                <span class="n">shadow</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">labels</span><span class="p">)[</span><span class="bp">self</span><span class="o">.</span><span class="n">_draw_mask</span><span class="p">],</span> <span class="n">labeldistance</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">wedges</span><span class="p">:</span>
            <span class="n">w</span><span class="o">.</span><span class="n">set_linewidth</span><span class="p">(</span><span class="mf">.5</span><span class="p">)</span>
            <span class="n">w</span><span class="o">.</span><span class="n">set_edgecolor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_graph_colors</span><span class="p">[</span><span class="s1">&#39;pie&#39;</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">text</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">size</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">6</span> <span class="o">*</span> <span class="n">tweak</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span> <span class="o">*</span> <span class="n">tweak</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span>
                         <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span>
                         <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">,</span>
                         <span class="n">fontsize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_fontsize</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_graph_colors</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">],</span> <span class="n">fontname</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_fontname</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Heatmap"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Heatmap">[docs]</a><span class="k">class</span> <span class="nc">Heatmap</span><span class="p">(</span><span class="n">Visualization</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">figure_size</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">proxy_artists</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fontname</span><span class="o">=</span><span class="s1">&#39;DejaVu Sans&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">graph_colors</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">figure_size</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">proxy_artists</span><span class="p">,</span> <span class="n">fontname</span><span class="p">,</span> <span class="n">fontsize</span><span class="p">,</span> <span class="n">graph_colors</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_df</span> <span class="o">=</span> <span class="n">df</span>

<div class="viewcode-block" id="Heatmap.draw"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Heatmap.draw">[docs]</a>    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmap</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="n">sn</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="n">annot</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span>
                   <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;.2f&quot;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="nb">range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">vmax</span><span class="o">=</span><span class="nb">range</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span></div>

<div class="viewcode-block" id="Heatmap.get_width"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Heatmap.get_width">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_width</span><span class="p">(</span><span class="n">number_of_groups</span><span class="p">,</span> <span class="n">num_bars_per_group</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Heatmap.get_height"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Heatmap.get_height">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_height</span><span class="p">(</span><span class="n">indices</span><span class="p">,</span> <span class="n">max_samples_overall</span><span class="p">,</span> <span class="n">min_samples_overall</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="k">pass</span></div></div>


<div class="viewcode-block" id="Table"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Table">[docs]</a><span class="k">class</span> <span class="nc">Table</span><span class="p">(</span><span class="n">Visualization</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span>  <span class="c1"># counts of shape (#counts,)</span>
                 <span class="n">figure_size</span><span class="p">,</span>
                 <span class="n">ax</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">proxy_artists</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">fontname</span><span class="o">=</span><span class="s1">&#39;DejaVu Sans&#39;</span><span class="p">,</span>
                 <span class="n">fontsize</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span>
                 <span class="n">graph_colors</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">figure_size</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">proxy_artists</span><span class="o">=</span><span class="n">proxy_artists</span><span class="p">,</span> <span class="n">fontname</span><span class="o">=</span><span class="n">fontname</span><span class="p">,</span>
                         <span class="n">fontsize</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span> <span class="n">graph_colors</span><span class="o">=</span><span class="n">graph_colors</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_df</span> <span class="o">=</span> <span class="n">df</span>

<div class="viewcode-block" id="Table.draw"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Table.draw">[docs]</a>    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">table</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">plotting</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_df</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="Table.get_width"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Table.get_width">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_width</span><span class="p">(</span><span class="n">number_of_groups</span><span class="p">,</span> <span class="n">num_bars_per_group</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Table.get_height"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Table.get_height">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_height</span><span class="p">(</span><span class="n">indices</span><span class="p">,</span> <span class="n">max_samples_overall</span><span class="p">,</span> <span class="n">min_samples_overall</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="k">pass</span></div></div>


<div class="viewcode-block" id="Scatter"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Scatter">[docs]</a><span class="k">class</span> <span class="nc">Scatter</span><span class="p">(</span><span class="n">Visualization</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;A scatter plot showing #num_points points each with a specified color.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">        x : np.ndarray of shape (#num_points,)</span>
<span class="sd">            The x coordinates of the visualization</span>
<span class="sd">        y : np.ndarray of shape (#num_points,)</span>
<span class="sd">            The y coordinates of the visualization</span>
<span class="sd">        color_idx : np.ndarray of shape (#num_points,)</span>
<span class="sd">            A list of indices of colors, in which the point will be drawn.</span>
<span class="sd">        figure_size : (int,int)</span>
<span class="sd">            The size of the figure.</span>
<span class="sd">        ax : matplotlib.axes.Axes), optional</span>
<span class="sd">            Figure and Axes onto which the visualization should be drawn.</span>
<span class="sd">        proxy_artists : list of (matplotlib.artist.Artist, str), optional</span>
<span class="sd">            Already known components not recognized by matplotlib, which however should be drawn into the legend.</span>
<span class="sd">        fontname : str, optional</span>
<span class="sd">            The name of the font to be used.</span>
<span class="sd">        fontsize : int, optional</span>
<span class="sd">            The size of the font to be used.</span>
<span class="sd">        graph_colors : dict, optional</span>
<span class="sd">            A dictionary of color options to be set (See dtreeviz documentation). </span>

<span class="sd">    Example</span>
<span class="sd">    -------</span>
<span class="sd">    .. plot::</span>

<span class="sd">        &gt;&gt;&gt; import numpy as np</span>
<span class="sd">        &gt;&gt;&gt; import matplotlib.pyplot as plt</span>
<span class="sd">        &gt;&gt;&gt; from validating_models.drawing_utils import Scatter</span>
<span class="sd">        &gt;&gt;&gt; # Generate the data</span>
<span class="sd">        &gt;&gt;&gt; x = np.linspace(0,2*np.pi,100)</span>
<span class="sd">        &gt;&gt;&gt; y_ot = np.sin(x)</span>
<span class="sd">        &gt;&gt;&gt; y_gt = np.random.normal(y_ot,0.5)</span>
<span class="sd">        &gt;&gt;&gt; labels = [&#39;ot&#39;,&#39;gt&#39;]</span>
<span class="sd">        &gt;&gt;&gt; colors = [&#39;r&#39;,&#39;b&#39;]</span>
<span class="sd">        &gt;&gt;&gt; color_idx = [0 for i in range(len(x))] + [1 for i in range(len(x))]</span>
<span class="sd">        &gt;&gt;&gt; plot = Scatter(np.concatenate((x,x)), np.concatenate((y_ot,y_gt)), color_idx, (2,2))</span>
<span class="sd">        &gt;&gt;&gt; plot.draw(colors=colors, labels=labels)</span>
<span class="sd">        &gt;&gt;&gt; plot.add_wedge(np.pi,[0,2*np.pi])</span>
<span class="sd">        &gt;&gt;&gt; plot.draw_legend()</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">color_idx</span><span class="p">,</span> <span class="n">figure_size</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">proxy_artists</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fontname</span><span class="o">=</span><span class="s1">&#39;DejaVu Sans&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">graph_colors</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">figure_size</span><span class="p">,</span>
                         <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
                         <span class="n">proxy_artists</span><span class="o">=</span><span class="n">proxy_artists</span><span class="p">,</span>
                         <span class="n">fontname</span><span class="o">=</span><span class="n">fontname</span><span class="p">,</span>
                         <span class="n">fontsize</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span> <span class="n">graph_colors</span><span class="o">=</span><span class="n">graph_colors</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color_idx</span> <span class="o">=</span> <span class="n">color_idx</span>

<div class="viewcode-block" id="Scatter.draw"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Scatter.draw">[docs]</a>    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">colors</span><span class="p">,</span> <span class="n">labels</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Draws the Scatter Plot.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">            colors : list of colors</span>
<span class="sd">                The colors coresponding to the color_idx array.</span>
<span class="sd">            labels: list of str</span>
<span class="sd">                A list of labels corresponding to the label for each color.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">c</span> <span class="o">=</span> <span class="p">[</span><span class="n">colors</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_idx</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

        <span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">color_idx</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;idx&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;idx&#39;</span><span class="p">])[</span>
                        <span class="s1">&#39;idx&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">))),</span> <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">values</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">color</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">colors</span><span class="p">)[</span><span class="n">mask</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">labels</span><span class="p">)[</span><span class="n">mask</span><span class="p">]):</span>
            <span class="n">patch</span> <span class="o">=</span> <span class="n">patches</span><span class="o">.</span><span class="n">Patch</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">proxy_artists</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">patch</span><span class="p">,</span> <span class="n">label</span><span class="p">))</span></div>

<div class="viewcode-block" id="Scatter.add_wedge"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Scatter.add_wedge">[docs]</a>    <span class="k">def</span> <span class="nf">add_wedge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">x_range</span><span class="p">,</span> <span class="n">categorical_labels</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Adds a highlighted tick at position x given the range of x. When categorical_labels is given the x-Axis is labeled accordingly.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">            x : double</span>
<span class="sd">                The position at which a new tick should be drawn.</span>
<span class="sd">            x_range : (double, double)</span>
<span class="sd">                The range of the x axis, which is assumed by the given x.</span>
<span class="sd">            categorical_labels : dict of (double -&gt; str) assignments</span>
<span class="sd">                If set the labels are shown as sets on the limits of the x-Axis. The left side of the x-Axis contains the labels, which have a smaller value then x and the right side the bigger ones.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            validating_models.drawing_utils.Visualization</span>
<span class="sd">                The visualization object.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">coordinates_range</span> <span class="o">=</span> <span class="n">x_range</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">coordinates_range</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">categorical_labels</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="n">categorical_labels</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">myround</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">x_range</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">coordinates_range</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_wedge</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x_range</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Scatter.get_width"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Scatter.get_width">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_width</span><span class="p">(</span><span class="n">number_of_groups</span><span class="p">,</span> <span class="n">num_bars_per_group</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Scatter.get_height"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Scatter.get_height">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_height</span><span class="p">(</span><span class="n">indices</span><span class="p">,</span> <span class="n">max_samples_overall</span><span class="p">,</span> <span class="n">min_samples_overall</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="k">pass</span></div></div>


<div class="viewcode-block" id="Function"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Function">[docs]</a><span class="k">class</span> <span class="nc">Function</span><span class="p">(</span><span class="n">Visualization</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;A visualization showing the given datasets as graphs. Each graph has a color assigned.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">        figure_size : (int,int)</span>
<span class="sd">            The size of the figure.</span>
<span class="sd">        ax : matplotlib.axes.Axes), optional</span>
<span class="sd">            Figure and Axes onto which the visualization should be drawn.</span>
<span class="sd">        proxy_artists : list of (matplotlib.artist.Artist, str), optional</span>
<span class="sd">            Already known components not recognized by matplotlib, which however should be drawn into the legend.</span>
<span class="sd">        fontname : str, optional</span>
<span class="sd">            The name of the font to be used.</span>
<span class="sd">        fontsize : int, optional</span>
<span class="sd">            The size of the font to be used.</span>
<span class="sd">        graph_colors : dict, optional</span>
<span class="sd">            A dictionary of color options to be set (See dtreeviz documentation). </span>

<span class="sd">    Example</span>
<span class="sd">    -------</span>
<span class="sd">    .. plot::</span>

<span class="sd">        &gt;&gt;&gt; import numpy as np</span>
<span class="sd">        &gt;&gt;&gt; import matplotlib.pyplot as plt</span>
<span class="sd">        &gt;&gt;&gt; from validating_models.drawing_utils import Function</span>
<span class="sd">        &gt;&gt;&gt; # Generate the data</span>
<span class="sd">        &gt;&gt;&gt; x = np.linspace(0,2*np.pi,100)</span>
<span class="sd">        &gt;&gt;&gt; y_sin = np.sin(x)</span>
<span class="sd">        &gt;&gt;&gt; y_cos = np.cos(x)</span>
<span class="sd">        &gt;&gt;&gt; labels = [&#39;sin&#39;,&#39;cos&#39;]</span>
<span class="sd">        &gt;&gt;&gt; color_idx = [0 for i in range(len(x))] + [1 for i in range(len(x))]</span>
<span class="sd">        &gt;&gt;&gt; plot = Function((2,2))</span>
<span class="sd">        &gt;&gt;&gt; plot.add_dataset(x, y_sin, &#39;r&#39;, &#39;sin&#39;)</span>
<span class="sd">        &gt;&gt;&gt; plot.add_dataset(x, y_cos, &#39;b&#39;, &#39;cos&#39;)</span>
<span class="sd">        &gt;&gt;&gt; plot.draw()</span>
<span class="sd">        &gt;&gt;&gt; plot.add_wedge(np.pi,[0,2*np.pi])</span>
<span class="sd">        &gt;&gt;&gt; plot.draw_legend()</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">figure_size</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">proxy_artists</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fontname</span><span class="o">=</span><span class="s1">&#39;DejaVu Sans&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">graph_colors</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">figure_size</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">proxy_artists</span><span class="o">=</span><span class="n">proxy_artists</span><span class="p">,</span> <span class="n">fontname</span><span class="o">=</span><span class="n">fontname</span><span class="p">,</span>
                         <span class="n">fontsize</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span> <span class="n">graph_colors</span><span class="o">=</span><span class="n">graph_colors</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ys</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_colors</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_labels</span> <span class="o">=</span> <span class="p">[]</span>

<div class="viewcode-block" id="Function.add_dataset"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Function.add_dataset">[docs]</a>    <span class="k">def</span> <span class="nf">add_dataset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">label</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Add a new dataset to be drawn as a graph with the specified color.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">            x : numpy.ndarray of shape (#points,)</span>
<span class="sd">                The x coordinates of the dataset</span>
<span class="sd">            y : numpy.ndarray of shape (#points,)</span>
<span class="sd">                The y coordinates of the dataset</span>
<span class="sd">            color : str</span>
<span class="sd">                The color to be used to draw the graph.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_xs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_colors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">label</span><span class="p">)</span></div>

<div class="viewcode-block" id="Function.draw"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Function.draw">[docs]</a>    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Draws the Functions added before with add_dataset.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_xs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ys</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_colors</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_labels</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">)</span></div>

<div class="viewcode-block" id="Function.add_wedge"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Function.add_wedge">[docs]</a>    <span class="k">def</span> <span class="nf">add_wedge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">x_range</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Adds a highlighted tick at position x given the range of x.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">            x : double</span>
<span class="sd">                The position at which a new tick should be drawn.</span>
<span class="sd">            x_range : (double, double)</span>
<span class="sd">                The range of the x axis, which is assumed by the given x.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            validating_models.drawing_utils.Visualization</span>
<span class="sd">                The visualization object.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">coordinates_range</span> <span class="o">=</span> <span class="n">x_range</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">coordinates_range</span><span class="p">)</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">myround</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">x_range</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">coordinates_range</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_wedge</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x_range</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Function.get_width"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Function.get_width">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_width</span><span class="p">(</span><span class="n">number_of_groups</span><span class="p">,</span> <span class="n">num_bars_per_group</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Function.get_height"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Function.get_height">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_height</span><span class="p">(</span><span class="n">indices</span><span class="p">,</span> <span class="n">max_samples_overall</span><span class="p">,</span> <span class="n">min_samples_overall</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="k">pass</span></div></div>


<div class="viewcode-block" id="Legend"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Legend">[docs]</a><span class="k">class</span> <span class="nc">Legend</span><span class="p">(</span><span class="n">Visualization</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;A visualization to be used when just a legend should be drawn and the handles and labels are given.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">        handles: list of matplotlib.artists.Artist</span>
<span class="sd">            The handles to be included in the legend</span>
<span class="sd">        labels : list of str</span>
<span class="sd">            The labels of the handles.</span>
<span class="sd">        figure_size : (int,int), optional</span>
<span class="sd">            The size of the figure.</span>
<span class="sd">        fontname : str, optional</span>
<span class="sd">            The name of the font to be used.</span>
<span class="sd">        fontsize : int, optional</span>
<span class="sd">            The size of the font to be used.</span>
<span class="sd">        graph_colors : dict, optional</span>
<span class="sd">            A dictionary of color options to be set (See dtreeviz documentation). </span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">handles</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">figure_size</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">fontname</span><span class="o">=</span><span class="s1">&#39;DejaVu Sans&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">graph_colors</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">figure_size</span><span class="p">,</span> <span class="n">fontname</span><span class="o">=</span><span class="n">fontname</span><span class="p">,</span>
                         <span class="n">fontsize</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span> <span class="n">graph_colors</span><span class="o">=</span><span class="n">graph_colors</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_entries</span> <span class="o">=</span> <span class="p">{</span><span class="n">label</span><span class="p">:</span> <span class="n">handle</span> <span class="k">for</span> <span class="n">label</span><span class="p">,</span>
                         <span class="n">handle</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="n">handles</span><span class="p">)}</span>

<div class="viewcode-block" id="Legend.draw"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Legend.draw">[docs]</a>    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Draws the Legend.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">            title : str</span>
<span class="sd">                The title of the legend</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">labels</span><span class="p">,</span> <span class="n">handles</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_entries</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles</span><span class="o">=</span><span class="n">handles</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
                       <span class="n">fontsize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_fontsize</span><span class="p">,</span> <span class="n">title_fontsize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_fontsize</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="Legend.get_width"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Legend.get_width">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_width</span><span class="p">(</span><span class="n">number_of_groups</span><span class="p">,</span> <span class="n">num_bars_per_group</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Legend.get_height"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.Legend.get_height">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_height</span><span class="p">(</span><span class="n">indices</span><span class="p">,</span> <span class="n">max_samples_overall</span><span class="p">,</span> <span class="n">min_samples_overall</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
        <span class="k">pass</span></div></div>


<div class="viewcode-block" id="extract_labels_handles"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.extract_labels_handles">[docs]</a><span class="k">def</span> <span class="nf">extract_labels_handles</span><span class="p">(</span><span class="n">plot</span><span class="p">):</span>
    <span class="n">viz_handles</span><span class="p">,</span> <span class="n">viz_labels</span> <span class="o">=</span> <span class="n">plot</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">get_legend_handles_labels</span><span class="p">()</span>
    <span class="n">result</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">plot</span><span class="o">.</span><span class="n">proxy_artists</span><span class="p">))</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">plot</span><span class="o">.</span><span class="n">proxy_artists</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="p">[[],</span> <span class="p">[]]</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="n">viz_labels</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">handles</span> <span class="o">=</span> <span class="n">viz_handles</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">labels</span><span class="p">,</span> <span class="n">handles</span></div>

<div class="viewcode-block" id="new_draw_legend"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.new_draw_legend">[docs]</a><span class="k">def</span> <span class="nf">new_draw_legend</span><span class="p">(</span><span class="n">list_labels_handles</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">9</span><span class="p">):</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">handles</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">labels_handles</span> <span class="ow">in</span> <span class="n">list_labels_handles</span><span class="p">:</span>
        <span class="n">plot_labels</span><span class="p">,</span> <span class="n">plot_handles</span> <span class="o">=</span> <span class="n">labels_handles</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="n">labels</span> <span class="o">+</span> <span class="n">plot_labels</span>
        <span class="n">handles</span> <span class="o">=</span> <span class="n">handles</span> <span class="o">+</span> <span class="n">plot_handles</span>
    <span class="n">plot</span> <span class="o">=</span> <span class="n">Legend</span><span class="p">(</span><span class="n">handles</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">fontsize</span><span class="p">)</span>
    <span class="n">plot</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Constraint Satisfaction&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">plot</span></div>

<div class="viewcode-block" id="draw_legend"><a class="viewcode-back" href="../../validating_models.drawing_utils.html#validating_models.drawing_utils.draw_legend">[docs]</a><span class="k">def</span> <span class="nf">draw_legend</span><span class="p">(</span><span class="n">visualizations</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">9</span><span class="p">):</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">handles</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">viz</span> <span class="ow">in</span> <span class="n">visualizations</span><span class="p">:</span>
        <span class="n">viz_handles</span><span class="p">,</span> <span class="n">viz_labels</span> <span class="o">=</span> <span class="n">viz</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">get_legend_handles_labels</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">viz</span><span class="o">.</span><span class="n">proxy_artists</span><span class="p">)</span>
                      <span class="p">)</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">viz</span><span class="o">.</span><span class="n">proxy_artists</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="p">[[],</span> <span class="p">[]]</span>
        <span class="n">proxy_labels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">proxy_handles</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="n">labels</span> <span class="o">+</span> <span class="n">viz_labels</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">proxy_labels</span><span class="p">)</span>
        <span class="n">handles</span> <span class="o">=</span> <span class="n">handles</span> <span class="o">+</span> <span class="n">viz_handles</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">proxy_handles</span><span class="p">)</span>
    <span class="n">plot</span> <span class="o">=</span> <span class="n">Legend</span><span class="p">(</span><span class="n">handles</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">fontsize</span><span class="p">)</span>
    <span class="n">plot</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Constraint Satisfaction&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">plot</span></div>
</pre></div>

              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
              
          </main>
          

      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022, Julian Gercke.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>